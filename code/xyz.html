<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pascal Brissette">
<meta name="dcterms.date" content="2023-02-23">

<title>Exploration de données textuelles avec R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="xyz_files/libs/clipboard/clipboard.min.js"></script>
<script src="xyz_files/libs/quarto-html/quarto.js"></script>
<script src="xyz_files/libs/quarto-html/popper.min.js"></script>
<script src="xyz_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="xyz_files/libs/quarto-html/anchor.min.js"></script>
<link href="xyz_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="xyz_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="xyz_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="xyz_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="xyz_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploration de données textuelles avec R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pascal Brissette </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 23, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="avant-propos" class="level2">
<h2 class="anchored" data-anchor-id="avant-propos">Avant-propos</h2>
<p>Les lignes d’instruction (ou lignes de code) contenues dans le présent document, <strong>xyz.qmd</strong>, et dans le script <strong>xyz.R</strong> du même dossier sont à peu identiques. La différence entre les deux fichiers, c’est que l’un permet de tirer profit du langage HTML et de présenter un texte suivi avec des titres, des sous-titres, des italiques, des caractères gras, des listes, etc. Dans un script .R, au contraire, les possibilités sont limitées, le script étant d’abord fait pour rassembler des lignes d’instructions qui seront exécutées. Les commentaires généralement courts qu’on trouve dans un script sont précédés d’un ou de plusieurs croisillons #. Cela est plus rebutant à la lecture, mais il est bon de se familiariser avec ces deux formats. Un script .R est plus léger et c’est généralement le format qu’on utilise pour travailler. On recourt au document Quarto (.qmd) pour des présentations devant public. Un aspect très intéressant d’un tel document .qmd est qu’on peut générer, à partir de son contenu, un document .pdf, .word ou .html.</p>
<section id="exécuter-le-code-dun-document-quarto" class="level3">
<h3 class="anchored" data-anchor-id="exécuter-le-code-dun-document-quarto">Exécuter le code d’un document Quarto</h3>
<p>Lorsque vous cliquez sur le bouton <strong>Render</strong> dans le menu supérieur, un document sera généré comprenant aussi bien le contenu que le résultat des blocs de code. Vous pouvez insérer du code comme ceci:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>romans <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Illusions perdues"</span>, <span class="st">"Le Dernier jour d'un condamné"</span>, <span class="st">"La Débâcle"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Mon roman préféré est "</span>, <span class="fu">sample</span>(romans, <span class="dv">1</span>), <span class="st">"."</span>, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mon roman préféré est La Débâcle.</code></pre>
</div>
</div>
<p>Vous pouvez également ajouter des options. L’option <code>#| echo: false</code>, par exemple, permet d’imprimer le résultat d’une instruction dans le document généré avec <strong>Render</strong>, mais non le bloc de code. Cliquez sur <strong>Render</strong> et voyez le résultat.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Mon roman préféré est La Débâcle.</code></pre>
</div>
</div>
</section>
<section id="raccourci-et-aide" class="level3">
<h3 class="anchored" data-anchor-id="raccourci-et-aide">Raccourci et aide</h3>
<p>Pour exécuter tout un bloc de code, vous pouvez cliquer sur la flèche à l’extrémité supérieure droite du bloc. Si vous souhaitez plutôt exécuter les instructions d’un même bloc les unes après les autres, et observer le résultat, vous pouvez placer votre curseur au début de la ligne d’instruction à exécuter et appuyez sur ‘COMMAND’ + ‘RETURN’ (raccourci Mac) ou ‘CTRL’ + ‘RETURN’ (raccourci Windows) de votre clavier. Vous pouvez vous pratiquer avec les lignes d’instruction ci-dessous. Chacune appelle de l’aide sur une fonction en particulier. La fenêtre d’aide s’ouvrira dans la partie inférieure droite de RStudio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">paste</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>?<span class="fu">str</span>()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>?<span class="fu">install.packages</span>()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>?<span class="fu">library</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>?<span class="fu">nchar</span>()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>?<span class="fu">data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="nettoyage-de-lenvironnement-de-travail-élimination-des-objets-inutiles" class="level3">
<h3 class="anchored" data-anchor-id="nettoyage-de-lenvironnement-de-travail-élimination-des-objets-inutiles">Nettoyage de l’environnement de travail (élimination des objets inutiles)</h3>
<p>L’environnement de travail, auquel nous donne accès l’onglent Environment de RStudio (coin supérieur droit), contient tous vos objets. Chaque fois que vous emmagasinez une donnée dans une variable, celle-ci est ajoutée à l’environnement. Cela prend peu de temps pour charger l’environnement (et la mémoire) de RStudio. Voici comment nettoyer partiellement ou entièrement cet environnement:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création d'objets à éliminer</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>a<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>b<span class="ot">=</span><span class="dv">3</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>c<span class="ot">=</span><span class="st">"Virginie"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span><span class="st">"Théodore"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Élimination de tout le contenu de l'environnement:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Élimination d'une sélection d'éléments</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="fu">c</span>(<span class="st">"d"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="préparation-de-lenvironnement-de-travail" class="level2">
<h2 class="anchored" data-anchor-id="préparation-de-lenvironnement-de-travail">Préparation de l’environnement de travail</h2>
<p>Il est d’usage de placer en haut de son script les extensions qu’on compte utiliser. On voit d’abord une série d’instructions indiquant à R que si telle extension n’est pas installée déjà, il doit le faire. Ensuite, chacune des extensions est activée individuellement. Il y a des manières plus rapides de faire cela, mais on déplie ici le processus pour être clair.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installation des extensions dont nous aurons besoin (si elles ne sont pas déjà installées)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"stringr"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"stringr"</span>)}</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"readxl"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"readxl"</span>)}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"dplyr"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)}</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"ggplot2"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)}</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"quanteda"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"quanteda"</span>)}</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"quanteda.textplots"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"quanteda.textplots"</span>)}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"quanteda.textstats"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"quanteda.textstats"</span>)}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">"lsa"</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) {<span class="fu">install.packages</span>(<span class="st">"lsa"</span>)}</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Activation des extensions</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)               <span class="co"># Extension pour l'importation de fichiers Excel</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)              <span class="co"># Extension pour la manipulation des chaînes de caractères</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)                <span class="co"># Extension pour la manipulation des structures des tableaux de données</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)              <span class="co"># Extension pour la production de graphiques de haute qualité</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)             <span class="co"># Extension pour le forage textuel</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 3.2.3
Unicode version: 14.0
ICU version: 71.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: 10 of 10 threads used.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)   <span class="co"># Extension pour le forage textuel</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)   <span class="co"># Extension pour l'analyse des collocations</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lsa)                  <span class="co"># Extension offrant un antidictionnaire élaboré</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: SnowballC</code></pre>
</div>
</div>
</section>
<section id="importation-des-données" class="level2">
<h2 class="anchored" data-anchor-id="importation-des-données">Importation des données</h2>
<p>Les données que nous utiliserons sont contenues dans un dossier séparé du répertoire. Il est judicieux de séparer les scripts, les données et les résultats dans trois dossiers différents. Les données sont emmagasinées dans un fichier Excel. Pour lire un tel fichier, il faut utiliser une extension spécialisée appelée <strong>readxl</strong>. Ci-dessous, on appelle la fonction read_excel() de cette extension et on lui donne, comme argument <strong>path=</strong>, le chemin conduisant vers le fichier. On lui indique également (argument <strong>sheet=1</strong>) que la première feuille de calcul seule est à lire.</p>
<p>Le résultat de cette lecture est emmagasiné dans la variable xyz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lecture des données et assignation à une variable </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>xyz <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"../donnees/XYZ-2015-2022-table-20230205JV.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="examen-de-lobjet" class="level2">
<h2 class="anchored" data-anchor-id="examen-de-lobjet">Examen de l’objet</h2>
<p>La différence entre un logiciel comme Excel et un environnement de développement comme RStudio, c’est qu’on ne voit pas d’emblée le contenu des objets qu’on importe ou qu’on crée. Il faut soit les appeler directement (on exécute le nom d’un objet), soit cliquer sur l’icône de la grille qui se trouve à droite du nom de l’objet dans la partie Environment, soit encore utiliser différentes fonctions qui renverront les informations utiles sur l’objet. Voici les principales:</p>
<section id="valeurs-nulles-et-cellules-sans-contenu" class="level3">
<h3 class="anchored" data-anchor-id="valeurs-nulles-et-cellules-sans-contenu">Valeurs nulles et cellules sans contenu</h3>
<p>On ne verra pas ici les différentes manières de traiter les valeurs nulles ou sans contenu, mais on peut au moins montrer comment les repérer. Dans R, une valeur nulle est indiquée par NA (<em>not available</em>). Cependant, vous quand vous travaillez avec des textes, vous pouvez avoir de nombreuses chaines de caractères tout simplement vides. On voit ci-dessous la manière de repérer ces deux types de valeurs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La première fonction renvoie, pour chaque colonne du tableau, la somme des valeurs correspondant à NA.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(xyz, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      périodique            titre           auteur           numéro 
               0                0                0                0 
            date            thème              URI       éditeur(s) 
               0                0                0                0 
  ISSN (imprimé) ISSN (numérique)         citation   mention légale 
               0                0                0                0 
           texte 
               0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cette deuxième fonction renvoie, pour chacune des colonnes du tableau, la somme des valeurs correspondant à une chaîne de caractères vide.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(xyz, <span class="cf">function</span>(x) <span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">""</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      périodique            titre           auteur           numéro 
               0                0                0                0 
            date            thème              URI       éditeur(s) 
               0                0                0                0 
  ISSN (imprimé) ISSN (numérique)         citation   mention légale 
               0                0                0                0 
           texte 
               0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple test: on peut créer deux colonnes sans contenu, puis vérifier à nouveau si R repère ces valeurs nulles</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>xyz<span class="sc">$</span>test <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>xyz<span class="sc">$</span>test2 <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(xyz, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      périodique            titre           auteur           numéro 
               0                0                0                0 
            date            thème              URI       éditeur(s) 
               0                0                0                0 
  ISSN (imprimé) ISSN (numérique)         citation   mention légale 
               0                0                0                0 
           texte             test            test2 
               0              321                0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(xyz, <span class="cf">function</span>(x) <span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">""</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      périodique            titre           auteur           numéro 
               0                0                0                0 
            date            thème              URI       éditeur(s) 
               0                0                0                0 
  ISSN (imprimé) ISSN (numérique)         citation   mention légale 
               0                0                0                0 
           texte             test            test2 
               0               NA              321 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime ainsi des colonnes devenues inutiles</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>xyz[, <span class="fu">c</span>(<span class="st">"test"</span>, <span class="st">"test2"</span>)] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification que les colonnes ont bien disparu</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(xyz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "périodique"       "titre"            "auteur"           "numéro"          
 [5] "date"             "thème"            "URI"              "éditeur(s)"      
 [9] "ISSN (imprimé)"   "ISSN (numérique)" "citation"         "mention légale"  
[13] "texte"           </code></pre>
</div>
</div>
</section>
</section>
<section id="prétraitement-des-données" class="level2">
<h2 class="anchored" data-anchor-id="prétraitement-des-données">Prétraitement des données</h2>
<p>On appelle prétraitement les opérations qui doivent être faites aux données métadonnées pour faciliter ou rendre possible leur manipulation. Le prétraitement peut impliquer une réduction des dimensions du jeu de données pour réduire le bruit ou simplement rendre moins lourd les processus ultérieurs. D’autres problèmes requièrent des opérations plus chronophages: corrections de chaînes de caractères, traitement des valeurs nulles, etc. Des logiciels gratuits tel OpenRefine sont de très puissants alliés à cette étape, même si tout peut être fait avec R.</p>
<section id="principaux-problèmes-du-jeu-de-données" class="level3">
<h3 class="anchored" data-anchor-id="principaux-problèmes-du-jeu-de-données">Principaux problèmes du jeu de données</h3>
<ul>
<li><p>Problème1: les noms de colonnes contiennent des accents et des espaces;</p></li>
<li><p>Problème 2: les observations ne sont pas pourvues d’identifiants uniques;</p></li>
<li><p>Problème 3: certaines colonnes semblent n’apporter aucune information essentielle;</p></li>
<li><p>Problème 4: on aimerait avoir une colonne réservée aux années;</p></li>
<li><p>Problème 5: on voudrait que les valeurs numériques soient considérées comme des nombres, non comme des chaines de caractères;</p></li>
<li><p>Problème 6: dans la colonne `texte`, les sauts de paragraphes du texte original sont indiqués par “\n”.</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>